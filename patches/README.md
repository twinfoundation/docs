# Patched version of docusaurus

When updating the docusaurus version you must generate a new version of the patch.

The patch was generated by updating the code in node_modules and then running the following command.

## The code to patch

For the file `node_modules/@docusaurus/plugin-content-docs/lib/routes.js` in the `buildVersionDocRoutes` method replace the code with.

```js
    const results = [];
    for (let i = 0; i < version.docs.length; i++) {
        const doc = version.docs[i];
        if (doc) {
            await actions.createData(
            // Note that this created data path must be in sync with
            // metadataPath provided to mdx-loader.
            `${(0, utils_1.docuHash)(doc.source)}.json`, doc);
            const docRoute = {
                path: doc.permalink,
                component: options.docItemComponent,
                exact: true,
                modules: {
                    content: doc.source,
                },
                metadata: createDocRouteMetadata(doc),
                // Because the parent (DocRoot) comp need to access it easily
                // This permits to render the sidebar once without unmount/remount when
                // navigating (and preserve sidebar state)
                ...(doc.sidebar && {
                    sidebar: doc.sidebar,
                }),
            };
            results.push(docRoute);
        }
    }
    return results;
```

## Generating the patch

Run the following command:

```shell
npx patch-package @docusaurus/plugin-content-docs
```

Which will generate the patch file in the `patches` folder.

## Installing the patch

The patch is installed, in the `postinstall` script in package.json.
